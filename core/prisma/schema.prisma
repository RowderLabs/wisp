datasource db {
    provider = "sqlite"
    url      = "file:../../app/dev.db"
}

generator client {
    provider = "cargo prisma"
    output   = "../src/prisma.rs"
}

model CharacterCollection {
    id Int @id @default(autoincrement())
    name String
    path String?
    characters Person[]
}


model Person {
    id Int @id @default(autoincrement())
    name String
    parentRelationId Int?
    familyId Int?
    collectionId Int?
    family Family? @relation(fields: [familyId], references: [id], onDelete: Cascade)
    parents   Person[]   @relation("parentchildren")
    //all children belonging to person
    children Person[]  @relation("parentchildren")
    //relationship in which person is a product of
    childOf Relationship? @relation("children", fields: [parentRelationId], references: [id])
    //relationships where person is a member
    relationships Relationship[] @relation("members")
    collection CharacterCollection? @relation(fields: [collectionId], references: [id])
}

model Family {
    id Int @id @default(autoincrement())
    name String
    members Person[]
}

model Relationship {
    id Int @id @default(autoincrement())
    relationshipType String
    //members of a specific relationship
    members Person[] @relation("members")
    //children that are a product of a specific relationship
    children Person[] @relation("children")
}