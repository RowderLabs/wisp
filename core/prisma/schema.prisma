datasource db {
    provider = "sqlite"
    url      = "file:../../apps/app/dev.db"
}

generator client {
    provider = "cargo prisma"
    output   = "../src/prisma.rs"
}

model Character {
    path String @id
    fullName String
    isCollection Boolean
    traits CharacterHasTrait[]
    characterSheet CharacterSheet?
}

model CharacterSheet {
    id Int @id @default(autoincrement())
    photoPath String
    bannerPath String
    canvasPath String 
    characterId String @unique
    character Character @relation(fields: [characterId], references: [path])
    
}


model TraitCategory {

    id Int @id @default(autoincrement())
    name String
    traits Trait[]
    
}

model Trait {

    id Int @id @default(autoincrement())
    name String
    categoryId Int
    category TraitCategory @relation(fields: [categoryId], references: [id])
    characterHasTrait CharacterHasTrait[]
}

model CharacterHasTrait {

    trait Trait @relation(fields: [traitId], references: [id])
    traitId Int
    visible Boolean
    character Character @relation(fields: [characterId], references: [path])
    characterId String

    @@id([characterId, traitId])
}

