datasource db {
    provider = "sqlite"
    url      = "file:dev.db"
}

generator client {
    provider = "cargo prisma"
    output   = "../src/prisma.rs"
}

model Character {
    id String @id
    path String @unique
    fullName String
    isCollection Boolean
    characterSheet CharacterSheet?
    canvas Canvas?
}

model Canvas {
    id String @id @default(uuid())
    panels Panel[]
    characterId String @unique
    character Character @relation(fields: [characterId], references: [id], onDelete: Cascade)
}

model Panel {
    id String @id @default(uuid())
    panelType String
    x Int
    y Int
    width Int
    height Int
    content String?
    canvasId String
    canvas Canvas @relation(fields: [canvasId], references: [id], onDelete: Cascade)
}

model CharacterSheet {
    id Int @id @default(autoincrement())
    photoPath String
    bannerPath String
    canvasPath String 
    characterId String @unique
    character Character @relation(fields: [characterId], references: [path])
    
}

model FactGroup {
    id Int @id @default(autoincrement())
    entity String
    name String
    facts Fact[]
}

model Fact {
    id Int @id @default(autoincrement())
    key String @unique
    type String
    options String?
    groupId Int
    group FactGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)
}

